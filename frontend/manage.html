<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ค้นหาการจองโต๊ะ | ร้าน</title>
  <link rel="icon" type="image/png" href="/img/logo.png">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- โหลดฟอนต์ให้ถูกต้อง (แนะนำใช้ link แทน @import) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- ไฟล์สไตล์ของเรา: ให้ตามหลังฟอนต์เสมอ -->
  <link rel="stylesheet" href="/css/manage.css">
</head>
<body>

  <div class="navbar">
    <img src="/img/logo.png" alt="logo" class="logo">
    <ul>
      <li><a href="/login.html">เข้าสู่ระบบ</a></li>
      <li><a href="/main.html">หน้าหลัก</a></li>
      <li><a href="/notifications.html">แจ้งเตือน</a></li>
      <li><a href="/contact.html">ติดต่อเรา</a></li>
    </ul>
  </div>

  <main class="d-flex justify-content-center align-items-start">
    <div class="container d-flex justify-content-center">
      <div class="search-wrap w-100 glass-card p-4 p-sm-5">
        <form id="searchForm" class="row gy-3 align-items-center" novalidate>
          <div class="col-12 col-md-5 d-flex align-items-center gap-2">
            <label for="custName" class="thai-label">ชื่อ :</label>
            <input
              type="text"
              class="form-control"
              id="custName"
              name="name"
              placeholder="กรอกชื่อ"
              autocomplete="name"
              required
            >
          </div>

          <div class="col-12 col-md-5 d-flex align-items-center gap-2">
            <label for="custPhone" class="thai-label">เบอร์โทร:</label>
            <input
              type="tel"
              class="form-control"
              id="custPhone"
              name="phone"
              placeholder="กรอกเบอร์โทร (ตัวอย่าง 0812345678)"
              inputmode="tel"
              pattern="^0[0-9]{8,9}$"
              required
            >
          </div>

          <div class="col-12 col-md-2 text-md-start">
            <button type="submit" class="btn btn-brand w-100 rounded-3 fw-semibold">
              ค้นหา
            </button>
          </div>
        </form>

        <div id="resultArea" class="mt-4 d-none">
          <div class="alert alert-info mb-0 rounded-3" role="alert">
            <div class="fw-semibold mb-1">ผลการค้นหา</div>
            <div id="resultText" class="small"></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const form = document.getElementById('searchForm');

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      const name  = document.getElementById('custName').value.trim();
      const phone = document.getElementById('custPhone').value.trim();

      // ตรวจความถูกต้องแบบง่าย
      if (!name || !phone) {
        alert('กรุณากรอกชื่อและเบอร์โทรให้ครบ');
        return;
      }
      const phonePattern = /^0[0-9]{8,9}$/;
      if (!phonePattern.test(phone)) {
        alert('เบอร์โทรไม่ถูกต้อง (ตัวอย่างที่ถูก: 0812345678)');
        return;
      }

      // ไปหน้า results.html พร้อม query string
      const qs = new URLSearchParams({ name, phone }).toString();
      window.location.href = "results.html?" + qs;
    });
  </script>
</body>
</html>
